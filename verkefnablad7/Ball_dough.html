<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Kúla, kleinuhringur og gólf</title> 
	</head>
	<body>
        <canvas id="c" width="800" height="800"></canvas>

        <script src="../js/three.js"></script>
        <script src="../js/examples/js/controls/OrbitControls.js"></script>

		<script>
            const canvas = document.querySelector('#c');
			const scene = new THREE.Scene();
            scene.background = new THREE.Color('skyblue');
            
			const camera = new THREE.PerspectiveCamera(
                75, canvas.clientWidth / canvas.clientHeight, 0.1, 1000
            );
			camera.position.set(0, 2, 5);

            const controls = new THREE.OrbitControls(camera, canvas);

			const renderer = new THREE.WebGLRenderer({ canvas, antialias: true });
            renderer.setSize(canvas.clientWidth, canvas.clientHeight);

            const planeGeometry = new THREE.PlaneGeometry(6, 6);
            const planeMaterial = new THREE.MeshPhongMaterial({
                color: 0xcccccc,
                side: THREE.DoubleSide
            });
            const plane = new THREE.Mesh(planeGeometry, planeMaterial);
            plane.rotation.x = -Math.PI / 2;
            plane.position.set(0, -1, 0);
            scene.add(plane);

            const torusRadius = 1.0;
            const tubeRadius  = 0.25;

            const torusGeometry = new THREE.TorusGeometry(torusRadius, tubeRadius, 32, 64);
            const torusMaterial = new THREE.MeshPhongMaterial({ color: 0x8888ff });
            const torus = new THREE.Mesh(torusGeometry, torusMaterial);

            torus.position.set(0, tubeRadius, 0);
            scene.add(torus);

            const ballRadius = 0.4;
			const ballGeometry = new THREE.SphereGeometry(ballRadius, 32, 32);
			const ballMaterial = new THREE.MeshPhongMaterial({ color: 0xff8844 });
			const ball = new THREE.Mesh(ballGeometry, ballMaterial);
            scene.add(ball);

            let angle = 0;

            const orbitCenter = new THREE.Vector3(
                torusRadius, 
                tubeRadius,   
                0
            );

            const orbitRadius = 1;

            const light = new THREE.DirectionalLight(0xffffff, 1);
            light.position.set(3, 5, 4);
            scene.add(light);

            const ambient = new THREE.AmbientLight(0x404040);
            scene.add(ambient);

			const animate = function () {
				requestAnimationFrame(animate);

                angle += 0.02;

                ball.position.set(
                    orbitCenter.x + orbitRadius * Math.cos(angle),
                    orbitCenter.y,
                    orbitCenter.z + orbitRadius * Math.sin(angle)
                );


                controls.update();
				renderer.render(scene, camera);
			};

			animate();
		</script>
	</body>
</html>
